{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" as="style" crossorigin
    href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
  <link rel="stylesheet" href="{% static '/css/family1/main.css'%}" />

  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>

  <!-- full calendar -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.css">

  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.10.1/locales-all.js"></script>
  <title>우리가족</title>


  <script>
    $(function () {
      // GNB 클릭
      $("#menu ul li").on("click", function () {
        $("#menu ul li").removeClass("active");
        $(this).addClass("active");
      });
    });


    document.addEventListener('DOMContentLoaded', () => {
      const toggleButton1 = document.getElementById('toggleButton1');
      const mainMe = document.getElementById('main_me');
      const smallList1 = document.getElementById('small_list1');
      const smallItems1 = smallList1.querySelectorAll('.small_list_1');
      const smallToggle1 = document.getElementById('small_toggle_id1');
      const smallToggle2 = document.getElementById('small_toggle_id2');
      
      // small_list_1이 4개 이하일 경우 "더보기" 버튼 숨기기
      if (smallItems1.length <= 4) {
        smallToggle1.style.display = 'none';
      } else {
        smallToggle1.style.display = 'block';
      }
      // small_list_1이 4개 이하일 경우 "더보기" 버튼 숨기기
      if (smallToggle2.length <= 4) {
        smallToggle2.style.display = 'none';
      } else {
        smallToggle2.style.display = 'block';
      }
      
      // "더보기" 버튼 클릭 시 동작
      toggleButton1.addEventListener('click', () => {
        const expanded = mainMe.classList.toggle('expanded');
        smallList1.classList.toggle('expanded');
        mainMe.style.height = expanded ? `${smallList1.scrollHeight + 170}px` : '400px';
        toggleButton1.textContent = expanded ? '접기' : '더보기';
      });
    
      const toggleButton2 = document.getElementById('toggleButton2');
      const mainMe2 = document.getElementById('main_me2');
      const smallList2 = document.getElementById('small_list2');
      const smallItems2 = smallList2.querySelectorAll('.small_list_2');
      
      // small_list_2가 4개 이하일 경우 "더보기" 버튼 숨기기
      if (smallItems2.length <= 4) {
        toggleButton2.style.display = 'none';
      }
      
      // "더보기" 버튼 클릭 시 동작
      toggleButton2.addEventListener('click', () => {
        const expanded = mainMe2.classList.toggle('expanded');
        smallList2.classList.toggle('expanded');
        mainMe2.style.height = expanded ? `${smallList2.scrollHeight + 170}px` : '400px';
        toggleButton2.textContent = expanded ? '접기' : '더보기';
      });
    
      // 편집 버튼 클릭 시 스타일 변경 및 텍스트 변경
      const editButton = document.getElementById('king');
      const deleteButtons1 = document.querySelectorAll('.list_deleteBtn'); // 첫 번째 목록 삭제 버튼들
      const addButtonToggle = document.getElementById('add_Btn_toggle'); // '맴버추가하기' 버튼
      
      editButton.addEventListener('click', () => {
        const isEditing = editButton.classList.contains('editing');
        if (isEditing) {
          // 완료 버튼으로 변경
          editButton.textContent = '완료';
          editButton.style.color = 'blue';
          editButton.style.textDecoration = 'underline';
          
          // 삭제 버튼 보이기
          deleteButtons1.forEach(button => button.style.display = 'inline-block');
          
          // '맴버추가하기' 버튼 보이기
          addButtonToggle.style.display = 'block';
        } else {
          // 편집 버튼으로 변경
          editButton.textContent = '편집';
          editButton.style.color = '';
          editButton.style.textDecoration = '';
          
          // 삭제 버튼 숨기기
          deleteButtons1.forEach(button => button.style.display = 'none');
          
          // '맴버추가하기' 버튼 숨기기
          addButtonToggle.style.display = 'none';
        }
        // 상태 토글
        editButton.classList.toggle('editing');
      });
    });

  </script>
</head>

<body>
  <!-- 최상단 메뉴 -->
  <div id="top_nav">
    <h1><a href="#"></a></h1>
    <ul class="top_menu">
      <li>
        <a href="#"><img src="{% static 'images/family1/search_icon.png'%}" alt="" /></a>
      </li>
      <li>
        <a href="#"><img src="{% static 'images/family1/bell_off_icon.png'%}" alt="" /></a>
      </li>
      <li><a href="#">마이페이지</a></li>
    </ul>
  </div>

  <!-- 좌측 gnb -->
  <div id="gnb">
    <!-- 프로필 -->
    <div id="user_profile">
      <div id="pimg">
        <img src="{% static 'images/family1/default_profile.png'%}" alt="" />
      </div>
      <p id="uName">김용준</p>
      <p id="uEmail">kyjoon0105@gmail.com</p>
    </div>

    <!-- Nav -->
    <nav id="menu">
      <ul>
        <a href="#">
          <li class="menu_item">우리 가족 이야기</li>
        </a>
        <a href="#">
          <li class="menu_item">다이어리</li>
        </a>
        <a href="#">
          <li class="menu_item">감정 돌아보기</li>
        </a>
        <a href="#">
          <li class="menu_item active">우리가족</li>
        </a>
        <a href="#">
          <li class="menu_item">캘린더</li>
        </a>
        <a href="#">
          <li class="menu_item">알려드려요</li>
        </a>
      </ul>
    </nav>

    <!-- logout -->
    <div id="logout">
      <a href="#"><span>로그아웃</span></a>
    </div>
  </div>

  <!-- container -->
  <div id="main_title">
    <h1>우리가족</h1>
    <div id="top_name">가족구성원</div>
    <div id='main_tool'>
      <div id="non">가족이 존재하지 않습니다. 가족을 추가하세요.</div>
      
      <div id="main_me">

        <div id="small_title1" class="small_title">가족그룹이름</div>
        <button type='button' id='king'>편집</button>

        <div class="small_list" id="small_list1">

          <div class="small_list_1">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
              <button type=button class="list_deleteBtn">삭제</button>
            </div>
          </div>
          <div class="small_list_1">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
              <button type=button class="list_deleteBtn">삭제</button>
            </div>
          </div>
          <div class="small_list_1">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
              <button type=button class="list_deleteBtn">삭제</button>
            </div>
          </div>
          <div class="small_list_1">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
              <button type=button class="list_deleteBtn">삭제</button>
            </div>
          </div>
          <div class="small_list_1">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
              <button type=button class="list_deleteBtn">삭제</button>
            </div>
          </div>


          

        </div>
        <div class="small_toggle" id='small_toggle_id1'>
          <button id="toggleButton1">더보기</button>
        </div>
        <div id="add_Btn_toggle">
          <button type="button" id="add_Bton">맴버추가하기</button>
        </div>



      </div>
      <div id="main_me2">
        
        <div id="small_title1" class="small_title">가족그룹이름</div>

        <div class="small_list" id="small_list2">

          <div class="small_list_2">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
            </div>
          </div>
          <div class="small_list_2">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
            </div>
          </div>
          <div class="small_list_2">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
            </div>
          </div>
          <div class="small_list_2">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
            </div>
          </div>
          <div class="small_list_2">
            <div class="small_img"><img src="{% static 'images/family1/default_profile.png'%}" alt="" /></div>
            <div class="summ">
              <div class="small_name">홍길동</div>
              <div class="small_bir">1999-01-09</div>
            </div>
          </div>

          
          
        </div>
        <div class="small_toggle" id='small_toggle_id2'>
          <button id="toggleButton2">더보기</button>
        </div>
      </div>

    </div>
  </div>
  <div></div>

  <!-- footer -->
</body>

</html>